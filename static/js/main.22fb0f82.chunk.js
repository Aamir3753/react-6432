(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,t,i){"use strict";i.r(t);var s=i(0),n=i.n(s),o=i(7),h=i.n(o),l=i(1),r=i(2),a=i(4),c=i(3),d=i(5);function u(e,t){this.bulletVy=20,this.bullet=t,this.bulletPosX1=w.posX+5,this.bulletPosY1=w.posY,this.bulletPosX2=w.posX+32,this.bulletPosY2=w.posY,this.bulletHeight=10,this.bulletWidth=3,this.bullet=t,this.shipX=w.posX,this.shipY=w.posY,this.bullet1Destroyed=!1,this.bullet2Destroyed=!1,this.ctx=e,this.intKey=0,this.bulletPosY1=this.bulletPosY2=w.posY,this.fireBullet=function(){this.ctx.drawImage(this.bullet,this.bulletPosX1,this.bulletPosY1),this.ctx.drawImage(this.bullet,this.bulletPosX2,this.bulletPosY2)},this.genBulletAndMove=function(){var e=this;this.fireBullet(),this.intKey=setInterval(function(){if(0===e.bulletPosY1)return clearInterval(e.intKey),e.ctx.clearRect(e.bulletPosX1,e.bulletPosY1,e.bulletWidth,e.bulletHeight),void e.ctx.clearRect(e.bulletPosX2,e.bulletPosY2,e.bulletWidth,e.bulletHeight);e.ctx.clearRect(e.bulletPosX1,e.bulletPosY1,e.bulletWidth,e.bulletHeight),e.ctx.clearRect(e.bulletPosX2,e.bulletPosY2,e.bulletWidth,e.bulletHeight),e.bulletPosY1-=e.bulletVy,e.bulletPosY2-=e.bulletVy,e.bullet1Destroyed||e.ctx.drawImage(e.bullet,e.bulletPosX1,e.bulletPosY1,e.bulletWidth,e.bulletHeight),e.bullet2Destroyed||e.ctx.drawImage(e.bullet,e.bulletPosX2,e.bulletPosY2,e.bulletWidth,e.bulletHeight)},100)},this.destroyBullet1=function(){this.bullet1Destroyed=!0,this.ctx.clearRect(this.bulletPosX1,this.bulletPosY1,this.bulletWidth,this.bulletHeight)},this.destroyBullet2=function(){this.bullet2Destroyed=!0,this.ctx.clearRect(this.bulletPosX2,this.bulletPosY2,this.bulletWidth,this.bulletHeight)}}var p=function(){var e=new Image;e.src="./imgs/ship.png";var t=new Image;t.src="./imgs/bullet.png";var i=new Image;i.src="./imgs/enemy.png";var s=new Image;return s.src="./imgs/bg.png",{ship:e,bullet:t,enemy:i,bg:s}},g=new Event("gameOvered"),m=new Event("increaseScore");function v(e,t,i,s,n){this.enemyPosX=0,this.enemyPosY=0,this.canvasWidth=s,this.canvasHeight=i,this.enemyDestroyed=!1,this.ctx=e,this.enemySpeed=10,this.enemyHeight=this.enemyWidth=40,this.enemy=t,this.enemyInterval=n,this.isGameOvered=!1,this.genAndMove=function(){var e=this;this.enemyPosX=40*Math.ceil(Math.random()*Math.floor(this.canvasWidth/40)),this.ctx.drawImage(this.enemy,this.enemyPosX,this.enemyPosY,this.enemyWidth,this.enemyHeight);var t=setInterval(function(){return e.enemyPosY>e.canvasHeight?(clearInterval(t),void window.dispatchEvent(g)):e.enemyDestroyed?(clearInterval(t),void window.dispatchEvent(m)):(e.ctx.clearRect(e.enemyPosX,e.enemyPosY,e.enemyWidth,e.enemyHeight),e.enemyPosY+=e.enemySpeed,void e.ctx.drawImage(e.enemy,e.enemyPosX,e.enemyPosY,e.enemyWidth,e.enemyHeight))},this.enemyInterval);this.intKey=t},this.destroyEnemy=function(){this.ctx.clearRect(this.enemyPosX,this.enemyPosY,this.enemyWidth,this.enemyHeight)},this.detectCollision=function(e){var t=this,i=setInterval(function(){!function(){var i=t.enemyPosX,s=i+t.enemyWidth,n=t.enemyPosY,o=n+t.enemyHeight,h=e.bulletPosX1,l=h+e.bulletWidth,r=e.bulletPosY1,a=e.bulletPosX2,c=a+e.bulletWidth,d=e.bulletPosY2;h>i&&l<s&&r<o&&r>n&&(e.destroyBullet1(),t.enemyDestroyed=!0,t.destroyEnemy()),a>i&&c<s&&d<o&&d>n&&(e.destroyBullet2(),t.enemyDestroyed=!0,t.destroyEnemy())}(),(e.bulletPosY1<=0||e.bulletPosY2<=0)&&clearInterval(i)},0)},this.stopEnemy=function(){clearInterval(this.intKey)}}var y=p(),w={posX:0,posY:0,ship:null,shipHeight:40,shipWidth:40,shipVx:15,shipVy:15,touchV:5,ctx:null,totalHeight:0,totalWidth:0,intKey:0,defficulty:2e3,score:0,updateScore:null,isGameOvered:!1,gameOver:null,drawInCenter:function(e,t,i,s,n,o){this.ctx=e,this.updateScore=n,this.gameOver=o,this.totalHeight=t,this.totalWidth=i,this.ship=s,this.posX=i/2,this.posY=t-this.shipHeight,this.ctx.drawImage(this.ship,this.posX,this.posY,this.shipWidth,this.shipHeight)},moveShip:function(){var e=this,t=0,i=0,s=[],n=100,o=0,h=setInterval(function(){++o%5===0&&(n-=5);var t=new v(e.ctx,y.enemy,e.totalHeight,e.totalWidth,n);t.genAndMove(),s.push(t)},this.defficulty);window.addEventListener("touchstart",function(e){t=e.changedTouches[0].clientX,i=e.changedTouches[0].clientY}),window.addEventListener("touchmove",function(s){if(!e.isGameOvered){if(s.changedTouches[0].clientX<t&&e.posX>0)return e.ctx.clearRect(e.posX,e.posY,e.shipWidth,e.shipHeight),e.posX-=e.touchV,void e.ctx.drawImage(e.ship,e.posX,e.posY,e.shipWidth,e.shipHeight);if(s.changedTouches[0].clientX>t&&e.posX<e.totalWidth-e.shipWidth)return e.ctx.clearRect(e.posX,e.posY,e.shipWidth,e.shipHeight),e.posX+=e.touchV,void e.ctx.drawImage(e.ship,e.posX,e.posY,e.shipWidth,e.shipHeight);s.changedTouches[0].clientY<i&&e.posY>e.totalHeight-e.totalHeight/4&&(e.ctx.clearRect(e.posX,e.posY,e.shipWidth,e.shipHeight),e.posY-=e.touchV,e.ctx.drawImage(e.ship,e.posX,e.posY,e.shipWidth,e.shipHeight)),s.changedTouches[0].clientY>i&&e.posY<e.totalHeight-e.shipHeight&&(e.ctx.clearRect(e.posX,e.posY,e.shipWidth,e.shipHeight),e.posY+=e.touchV,e.ctx.drawImage(e.ship,e.posX,e.posY,e.shipWidth,e.shipHeight))}}),window.addEventListener("touchend",function(n){if(n.changedTouches[0].clientX===t&&n.changedTouches[0].clientY===i&&!e.isGameOvered){var o=new u(e.ctx,y.bullet);o.genBulletAndMove(),(s=s.filter(function(e){return!e.enemyDestroyed})).map(function(e){return e.detectCollision(o),console.log(e.enemyDestroyed),0})}}),window.addEventListener("keydown",function(t){if(!e.isGameOvered&&("ArrowLeft"===t.code&&e.posX>0&&(e.ctx.clearRect(e.posX,e.posY,e.shipWidth,e.shipHeight),e.posX-=e.shipVx,e.ctx.drawImage(e.ship,e.posX,e.posY,e.shipWidth,e.shipHeight)),"ArrowRight"===t.code&&e.posX<e.totalWidth-e.shipWidth&&(e.ctx.clearRect(e.posX,e.posY,e.shipWidth,e.shipHeight),e.posX+=e.shipVx,e.ctx.drawImage(e.ship,e.posX,e.posY,e.shipWidth,e.shipHeight)),"ArrowUp"===t.code&&e.posY>e.totalHeight-e.totalHeight/4&&(e.ctx.clearRect(e.posX,e.posY,e.shipWidth,e.shipHeight),e.posY-=e.shipVy,e.ctx.drawImage(e.ship,e.posX,e.posY,e.shipWidth,e.shipHeight)),"ArrowDown"===t.code&&e.posY<e.totalHeight-e.shipHeight&&(e.ctx.clearRect(e.posX,e.posY,e.shipWidth,e.shipHeight),e.posY+=e.shipVy,e.ctx.drawImage(e.ship,e.posX,e.posY,e.shipWidth,e.shipHeight)),"Space"===t.code)){var i=new u(e.ctx,y.bullet);i.genBulletAndMove(),(s=s.filter(function(e){return!e.enemyDestroyed})).map(function(e){return e.detectCollision(i),0})}}),window.addEventListener("gameOvered",function(){s.map(function(e){return e.stopEnemy(),0}),clearInterval(h),e.gameOver(),e.isGameOvered=!0}),window.addEventListener("increaseScore",function(){e.updateScore()})}},b=function(e){function t(){return Object(l.a)(this,t),Object(a.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=p(),i=this.refs.gameArea.getContext("2d");window.addEventListener("load",function(){w.drawInCenter(i,window.innerHeight,window.innerWidth,t.ship,e.props.updateScore,e.props.gameOver,e.isGameOvered,e.props.score),w.moveShip()})}},{key:"render",value:function(){return n.a.createElement("canvas",{ref:"gameArea",width:window.innerWidth,height:window.innerHeight,style:{position:"absolute",zIndex:"2"}})}}]),t}(s.Component),f=function(e){function t(){var e,i;Object(l.a)(this,t);for(var s=arguments.length,n=new Array(s),o=0;o<s;o++)n[o]=arguments[o];return(i=Object(a.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(n)))).state={score:0,isGameOvered:!1},i.updateScore=function(){i.setState(function(e){return{score:e.score+5}})},i.restartGame=function(){i.setState({score:0}),window.location.reload()},i.gameOver=function(){var e=JSON.parse(localStorage.getItem("heighScore"));e?e<i.state.score&&localStorage.setItem("heighScore",JSON.stringify(i.state.score)):localStorage.setItem("heighScore",JSON.stringify(i.state.score)),i.setState({isGameOvered:!0})},i}return Object(d.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=p(),t=this.refs.background.getContext("2d");window.addEventListener("load",function(){t.drawImage(e.bg,0,0,window.innerWidth,window.innerHeight)})}},{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement("canvas",{height:window.innerHeight,width:window.innerWidth,ref:"background",style:{zIndex:"1",position:"absolute"}}),n.a.createElement(b,{updateScore:this.updateScore,gameOver:this.gameOver,score:this.state.score}),n.a.createElement("div",{style:{position:"absolute",zIndex:"3",display:"flex",justifyContent:"space-around",color:"white",width:"100%"}},n.a.createElement("h3",{style:{color:"white"}},"Score:",this.state.score),n.a.createElement("h3",null,JSON.parse(localStorage.getItem("heighScore"))?"Heigh Score:"+JSON.parse(localStorage.getItem("heighScore")):null)),n.a.createElement("div",{style:{position:"absolute",left:"45%",top:"45%",zIndex:"3",color:"white"}},this.state.isGameOvered?n.a.createElement("div",null,n.a.createElement("h4",{style:{margin:0,textAlign:"center"}},"Game Over"),n.a.createElement("button",{type:"button",onClick:this.restartGame},"Restart Game")):null))}}]),t}(n.a.Component),Y=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function X(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var i=e.installing;null!=i&&(i.onstatechange=function(){"installed"===i.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}h.a.render(n.a.createElement(f,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");Y?(function(e,t){fetch(e).then(function(i){var s=i.headers.get("content-type");404===i.status||null!=s&&-1===s.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):X(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):X(t,e)})}}()},8:function(e,t,i){e.exports=i(14)}},[[8,1,2]]]);
//# sourceMappingURL=main.22fb0f82.chunk.js.map